# VS Code 查找和替换功能产品需求文档

## 1. 功能概述

本文档详细描述了一个与 VS Code 左侧标签查找和替换功能 1:1 复刻的需求。该功能允许用户在项目文件中进行全局文本搜索和替换操作，支持各种高级搜索选项，并提供直观的结果展示和导航。

## 2. 用户目标

- 快速在项目中查找指定文本
- 查找文本并进行批量或选择性替换
- 通过高级搜索选项精确定位目标内容
- 获得清晰的搜索结果并能够轻松导航

## 3. 详细功能规格


### 搜索选项
必选参数：
- **搜索文本**：需要搜索的文本内容(或正则表达式)，可以是单行或多行
- **根目录**：指定搜索的根目录或工作区
可选参数：
- **区分大小写**：启用/禁用大小写敏感搜索
- **全字匹配**：仅匹配作为完整单词出现的文本
- **正则表达式**：支持使用正则表达式进行搜索
- **相邻行展示**：支持一并展示结果上下特定行数的内容(上行数和下行数都可以指定)
- **包含/排除文件和文件夹**
  - 支持 glob 模式（如 src/**/*.ts）配置包含的文件和排除的文件
  - 支持是否搜索 gitignore 命中文件的配置

### 搜索结果要素

- **树状结构组织**
  - 按文件分组展示结果
  - 显示文件相对路径
  - 显示每个文件中的匹配数量
  - 支持展开/折叠文件和目录节点
、
- **状态信息**
  - 显示总匹配数
  - 显示已搜索的文件数量
  - 显示搜索状态（进行中/完成）
  - 显示搜索耗时

### 替换功能

可以基于搜索结果进行替换操作，支持以下功能：
- **替换内容**
  - 支持单行和多行文本输入
  - 支持对搜索结果的引用（如 $1, $2 等正则表达式捕获组）
- **全局替换**：替换所有匹配项
- **选择性替换**：支持仅替换特定文件、或文件中特定匹配项



## 5. 性能需求

- 搜索操作响应时间：首次结果显示 < 100ms
- 大型项目（>10,000文件）索引和搜索优化
- 增量搜索：文件变更时实时更新结果
- 低内存占用：搜索不应导致明显的内存使用增加
- 替换大量内容时不阻塞主线程

## 6. 技术需求

- 支持 Unicode 和多语言文本搜索
- 支持各种文本编码（UTF-8, UTF-16, ASCII等）
- 支持大文件处理（>100MB）
- 支持二进制文件排除
- 支持断点续搜（搜索状态持久化）

## 7. 集成需求

- 与文件系统无缝集成
- 与版本控制系统集成（识别变更状态）

## 8. 约束和限制

- 必须支持所有主流操作系统（Windows, macOS, Linux）
- 内存使用须适合低配置机器
- 搜索索引大小应合理，不应占用过多磁盘空间
- 替换操作必须提供撤销机制
- 必须支持离线工作模式

此产品需求文档详细描述了VS Code查找和替换功能的复刻版，专注于功能规格而非前端实现细节。