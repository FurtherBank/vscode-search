# 代码重构 mcp

## 思路

在一个大型项目代码库中，做一个重构项目，是要在
**数十万行**
的代码里面，找到
**所有的**
涉及到这个模块变动相关的内容(本身和其引用链)，然后统一改为正确的版本。

一股脑把所有代码都喂给模型完全不现实，要处理的代码量(tokens)太多了，首先不一定处理的了，其次处理也需要极长时间。

所以，解决这个问题，就要让模型掌握一门搜索替换的工具。

为了让这个工具具备通用性，因此，这个工具是基于文字的搜索替换，这样其使用就不仅限于特定的编程语言。

## 实现过程

### 工具实现
这个工具具体实现成什么样？

有一个现成的常用工具，就是 vscode 的搜索替换功能。

因此，可以直接复刻这个功能，然后将其封装成一个mcp工具。

功能的复刻，可以直接写好需求，交给 ai 来完成：[需求文档](doc.md)

### mcp 对接

使用官方的 @modelcontextprotocol/mcp 包来对接 mcp。

这个包设计上是一个命令行mcp

### mcp 测试

## 使用

现在 mcp 生态还没有实现将工具作为一个“包”的相关规范
